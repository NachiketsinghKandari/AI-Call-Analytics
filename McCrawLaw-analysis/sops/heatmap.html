<!DOCTYPE html>
<html>
<head>
    <title>SOP Pattern Heatmaps</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: #1a1a2e;
            color: #eee;
        }
        h1, h2 {
            color: #fff;
        }
        .chart-container {
            margin: 20px 0;
            background: #16213e;
            padding: 20px;
            border-radius: 10px;
        }
        .metadata {
            background: #0f3460;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>SOP Pattern Analysis - Heatmaps</h1>

    <div class="metadata">
        <p><strong>Generated:</strong> 2026-01-31 13:40</p>
        <p><strong>Total Records:</strong> 486</p>
        <p><strong>Caller Types:</strong> 9</p>
        <p><strong>Destinations:</strong> 8</p>
    </div>

    <div class="chart-container">
        <h2>Caller Type vs Destination</h2>
        <div id="heatmap1"></div>
    </div>

    <div class="chart-container">
        <h2>Caller Type vs Intent</h2>
        <div id="heatmap2"></div>
    </div>

    <script>
        // Heatmap 1: Caller Type x Destination
        var data1 = [{
            z: [[1, 0, 0, 0, 1, 28, 2, 0], [0, 0, 6, 1, 4, 64, 43, 8], [0, 0, 0, 0, 0, 7, 1, 0], [0, 0, 3, 0, 8, 66, 13, 7], [0, 0, 0, 0, 4, 19, 10, 0], [0, 1, 2, 0, 0, 33, 4, 3], [0, 0, 0, 3, 5, 93, 2, 1], [1, 0, 0, 0, 0, 28, 0, 0], [0, 0, 0, 0, 0, 9, 1, 4]],
            x: ["administration and operations", "billing and disbursements", "case management", "intake and investigation", "legal counsel", "no transfer", "specific staff member", "unspecified internal transfer"],
            y: ["business vendor", "existing client", "family member", "insurance rep", "law office", "medical provider", "new client", "sales vendor", "spanish speaker"],
            type: 'heatmap',
            colorscale: 'Viridis',
            hoverongaps: false
        }];

        var layout1 = {
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            font: { color: '#eee' },
            xaxis: { tickangle: 45 },
            margin: { l: 150, r: 50, t: 50, b: 150 }
        };

        Plotly.newPlot('heatmap1', data1, layout1);

        // Heatmap 2: Caller Type x Intent
        var data2 = [{
            z: [[13, 0, 0, 0, 1, 0, 2, 2, 3, 10, 1, 0], [4, 24, 2, 8, 2, 1, 30, 5, 0, 47, 3, 0], [0, 0, 0, 0, 0, 4, 2, 0, 0, 2, 0, 0], [3, 27, 2, 18, 3, 1, 15, 0, 0, 25, 0, 3], [3, 0, 0, 1, 9, 2, 3, 0, 0, 15, 0, 0], [10, 15, 2, 2, 0, 0, 2, 0, 0, 8, 1, 3], [1, 0, 0, 1, 0, 34, 6, 0, 0, 1, 61, 0], [1, 0, 0, 0, 0, 0, 0, 0, 28, 0, 0, 0], [2, 1, 0, 0, 0, 2, 1, 0, 0, 3, 5, 0]],
            x: ["administrative request", "check case status", "document and evidence submission", "financial and settlement inquiry", "legal operations discussion", "new client intake", "returning call", "scheduling and appointments", "solicitation and spam", "speak with staff", "unknown or undetermined", "verify representation"],
            y: ["business vendor", "existing client", "family member", "insurance rep", "law office", "medical provider", "new client", "sales vendor", "spanish speaker"],
            type: 'heatmap',
            colorscale: 'Plasma',
            hoverongaps: false
        }];

        var layout2 = {
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            font: { color: '#eee' },
            xaxis: { tickangle: 45 },
            margin: { l: 150, r: 50, t: 50, b: 150 }
        };

        Plotly.newPlot('heatmap2', data2, layout2);
    </script>
</body>
</html>
